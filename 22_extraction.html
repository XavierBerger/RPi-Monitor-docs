

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Metrics extraction configuration &mdash; RPi-Monitor v2.13-r0</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="RPi-Monitor v2.13-r0" href="index.html"/>
        <link rel="up" title="Configuration" href="20_index.html"/>
        <link rel="next" title="Interactive Configuration Helper" href="23_configuration_helper.html"/>
        <link rel="prev" title="Daemon configuration" href="21_daemon.html"/>


<script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6853682829194266",
    enable_page_level_ads: true
  });
</script>



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114314379-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-114314379-1');
</script>



  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  
 
<img style="position: fixed; top: 0; right: 0; z-index: 100; height:300px; border: 0;" src="_images/wip.png">


  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> RPi-Monitor
          

          
          </a>

          
            
            
              <div class="version">
                2.13
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          

            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="01_features.html">Keys features of RPi-Monitor</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="10_index.html">Getting started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="20_index.html">Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="21_daemon.html">Daemon configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Metrics extraction configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="23_configuration_helper.html">Interactive Configuration Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="24_web.html">Web interface configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="25_addons.html">Addons configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="26_alert.html">Alert configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="27_configuration_templates.html">Configuration templates</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="30_index.html">Usages</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="40_index.html">To go further</a></li>
</ul>

            
          

<hr />
<div style="padding: 0;">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:inline-block;width:300px;height:250px"
         data-ad-client="ca-pub-6853682829194266"
         data-ad-slot="2876944524"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>


        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RPi-Monitor</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="20_index.html">Configuration</a> &raquo;</li>
        
      <li>Metrics extraction configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <!-- User defined GitHub URL -->
              <a href="https://github.com/XavierBerger/RPi-Monitor/blob/feature/docs/docs/source/22_extraction.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="metrics-extraction-configuration">
<h1>Metrics extraction configuration<a class="headerlink" href="#metrics-extraction-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="include">
<h2>Include<a class="headerlink" href="#include" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">include</span></code> keyword is available to add a file to the list of configuration files to be loaded.</p>
<dl class="docutils">
<dt>include=&lt;full path to configuration file&gt;</dt>
<dd><p class="first"><code class="docutils literal"><span class="pre">&lt;full</span> <span class="pre">path</span> <span class="pre">to</span> <span class="pre">configuration</span> <span class="pre">file&gt;</span></code> is the full path to the configuration
file to add at the end of the list of configuration files to be loaded.</p>
<div class="last admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">The initial order of information displayed in status page depends on the
order of file inclusion.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="static">
<h2>Static<a class="headerlink" href="#static" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">static</span></code> is definign KPI which is not changing over the time. KPI are extracted
once at <code class="docutils literal"><span class="pre">rpimonitord</span></code> startup (example: memory size, disk size, network bandwidth limit...).</p>
<p>Each static KPI is identified into the configuration file by a line starting with the
keyword <code class="docutils literal"><span class="pre">static</span></code>, an identifier <code class="docutils literal"><span class="pre">&lt;static</span> <span class="pre">data</span> <span class="pre">id&gt;</span></code> and the following parameters.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Inside a configuration file <code class="docutils literal"><span class="pre">&lt;static</span> <span class="pre">data</span> <span class="pre">id&gt;</span></code> should be unique per KPI.</p>
</div>
<dl class="docutils">
<dt>static.&lt;static data id&gt;.name=&lt;data name&gt;</dt>
<dd><p class="first"><code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">name&gt;</span></code> is a string representing the KPI or the list of KPI
separated by comma. Each name has to be unique.
Only alpha numerical charter and underscore are accepted.</p>
<div class="last admonition danger">
<p class="first admonition-title">Danger</p>
<p class="last">Do not use <code class="docutils literal"><span class="pre">-</span></code> in <code class="docutils literal"><span class="pre">data</span> <span class="pre">name</span></code>: This is a limitation of javascript.</p>
</div>
</dd>
<dt>static.&lt;static data id&gt;.source=&lt;data source&gt;</dt>
<dd><p class="first"><code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">source&gt;</span></code> is a file or an executable file within the path.
If the file exists, <code class="docutils literal"><span class="pre">rpimonitord</span></code> will read its content. If the file
is not existing, <code class="docutils literal"><span class="pre">rpimonitord</span></code> will try to execute it and will parse
the output.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p>In <code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">source&gt;</span></code> it is possible to refer to another <code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">name&gt;</span></code>
with the prefix <code class="docutils literal"><span class="pre">data.</span></code> followed by <code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">name&gt;</span></code>. This data could
refer to <code class="docutils literal"><span class="pre">dynamic</span></code> or <code class="docutils literal"><span class="pre">static</span></code> KPI.</p>
<p><strong>Example</strong>: <code class="docutils literal"><span class="pre">data.kernel_version</span></code></p>
<div class="last admonition important">
<p class="first admonition-title">Important</p>
<p>The order of KPI extraction is important.</p>
<p class="last">Data used should already been extracted to be accessible.</p>
</div>
</div>
</dd>
<dt>static.&lt;static data id&gt;.regexp=&lt;data regexp&gt;</dt>
<dd><code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">regexp&gt;</span></code> is the regular expression extracting information from
data source. Regexp groups <code class="docutils literal"><span class="pre">()</span></code> has to be used to extract the data
In case of KPI list, each group will be affected to a KPI name.</dd>
<dt>static.&lt;static data id&gt;.postprocess=&lt;data postprocess&gt;</dt>
<dd><code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">postprocess&gt;</span></code> is an expression defining the postprocessing to
be applied on result. KPI are idendified by <code class="docutils literal"><span class="pre">$1</span></code>. In case of list,
other KPI are identified by <code class="docutils literal"><span class="pre">$2</span></code>, <code class="docutils literal"><span class="pre">$3</span></code>, ...
This parameter will be evaluate by the command eval of <code class="docutils literal"><span class="pre">perl</span></code>.</dd>
</dl>
</div>
<div class="section" id="dynamic">
<h2>Dynamic<a class="headerlink" href="#dynamic" title="Permalink to this headline">¶</a></h2>
<p>Dynamic KPI are extracted periodically (defined by <code class="docutils literal"><span class="pre">daemon.delay</span></code>).
Each KPI is identified into the conf file by a line stating with the keyword
<code class="docutils literal"><span class="pre">dynamic</span></code>, an identifier <code class="docutils literal"><span class="pre">&lt;dynamic</span> <span class="pre">data</span> <span class="pre">id&gt;</span></code> and the following parameters:</p>
<dl class="docutils">
<dt>dynamic.&lt;dynamic data id&gt;.name=&lt;data name&gt;</dt>
<dd><p class="first"><code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">name&gt;</span></code> is a string representing the KPI or the list of KPI
separated by comma. Each name has to be unique.
Only alpha numerical charter and underscore are accepted.</p>
<div class="last admonition danger">
<p class="first admonition-title">Danger</p>
<p class="last">Do not use <code class="docutils literal"><span class="pre">-</span></code> in <code class="docutils literal"><span class="pre">data</span> <span class="pre">name</span></code>: This is a limitation of javascript.</p>
</div>
</dd>
<dt>dynamic.&lt;dynamic data id&gt;.source=&lt;data source&gt;</dt>
<dd><code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">source&gt;</span></code> is a file or an executable program within the path.
If the file exists, <code class="docutils literal"><span class="pre">rpimonitord</span></code> will read its content. If the file
is not existing, <code class="docutils literal"><span class="pre">rpimonirotd</span></code> will try to execute it and will parse
the output.</dd>
<dt>dynamic.&lt;dynamic data id&gt;.regexp=&lt;data regexp&gt;</dt>
<dd><code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">regexp&gt;</span></code> is the regular expression extracting information from
data source. Regexp groups <code class="docutils literal"><span class="pre">()</span></code> has to be used to extract the data
In case of KPI list, each group will be affected to a KPI name.</dd>
<dt>dynamic.&lt;dynamic data id&gt;.postprocess=&lt;data postprocess&gt;</dt>
<dd><p class="first"><code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">name&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">source&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">regexp&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;data</span> <span class="pre">postprocess&gt;</span></code>
This 4 first parameters have the same signification as for static
parameters.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Static values are accessible for the post processing using the
variable <code class="docutils literal"><span class="pre">$this-&gt;{'static'}-&gt;{'static_data_name'}</span></code> and can be used.
You can refer to swap data extraction to see an example (cf. <code class="docutils literal"><span class="pre">swap.conf</span></code>).</p>
</div>
</dd>
<dt>dynamic.&lt;dynamic data id&gt;.interval=&lt;interval&gt;</dt>
<dd><code class="docutils literal"><span class="pre">rpimonitord</span></code> extracts data every <code class="docutils literal"><span class="pre">daemon.delay</span></code> seconds. <code class="docutils literal"><span class="pre">&lt;interval&gt;</span></code>
define how many loop have to be waited before extracting this data.
Default value is <code class="docutils literal"><span class="pre">1</span></code>. This means that data is extracted at every loop.</dd>
<dt>dynamic.&lt;dynamic data id&gt;.default=&lt;default&gt;</dt>
<dd>If <code class="docutils literal"><span class="pre">rpimonitord</span></code> can&#8217;t extract information, it is now possible to define
a <code class="docutils literal"><span class="pre">&lt;default&gt;</span></code> value which will be set for the KPI.</dd>
<dt>dynamic.&lt;dynamic data id&gt;.rrd=&lt;GAUGE|COUNTER|DERIVE|ABSOLUTE|COMPUTE&gt;</dt>
<dd><code class="docutils literal"><span class="pre">rrd</span></code> parameter is defining if the KPI has to be stored into a RRD
database and how <code class="docutils literal"><span class="pre">&lt;GAUGE|COUNTER|DERIVE|ABSOLUTE|COMPUTE&gt;</span></code>. If the
parameter is defined as empty, no RRD database will be created. If
this parameter is defined, a RRD database will be created and data
will be stored at every extraction.
Ref <a class="reference external" href="http://oss.oetiker.ch/rrdtool/doc/rrdcreate.en.html">RRDTool documentation</a>
for RRD parameter description.</dd>
</dl>
<p><strong>dynamic.&lt;dynamic data id&gt;.min=&lt;minimal value acceptable in RRD&gt;</strong></p>
<dl class="docutils">
<dt>dynamic.&lt;dynamic data id&gt;.max=&lt;maximal value acceptable in RRD&gt;</dt>
<dd><p class="first">If a value extracted by is less than minimal of greater than maximal
value, it will not be stored into RRD database as unknown.
These limits are usefull to handle counter that fall down to 0 when
they reach their limit (Ex: network graphs)</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Static values are accessible for the post processing using the
variable <code class="docutils literal"><span class="pre">$this-&gt;{'static'}-&gt;{'static_data_name'}</span></code> and can be used.
You can refer to swap data extraction to see an example.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="snmp-oid">
<h2>SNMP OID<a class="headerlink" href="#snmp-oid" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>RPi-Monitor</strong> is able to act as an snmp-agent. Snmp configuration is based
on KPI name. KPI could be <code class="docutils literal"><span class="pre">static</span></code> or <code class="docutils literal"><span class="pre">dynamic</span></code>.</p>
<dl class="docutils">
<dt>snmp.&lt;kpi name&gt;.id=&lt;id&gt;</dt>
<dd><code class="docutils literal"><span class="pre">&lt;id&gt;</span></code> is the last number of OID appended at the end of OID configuration
defined for snmp agent. (ref. SNMP agent configuration section)</dd>
<dt>snmp.&lt;kpi name&gt;.type=&lt;type&gt;</dt>
<dd>Type of data can be : <code class="docutils literal"><span class="pre">counter</span></code>, <code class="docutils literal"><span class="pre">counter64</span></code>, <code class="docutils literal"><span class="pre">gauge</span></code>, <code class="docutils literal"><span class="pre">integer</span></code>,
<code class="docutils literal"><span class="pre">ipaddr</span></code>, <code class="docutils literal"><span class="pre">ipaddress</span></code>, <code class="docutils literal"><span class="pre">netaddr</span></code>, <code class="docutils literal"><span class="pre">objectid</span></code>, <code class="docutils literal"><span class="pre">octetstr</span></code>,
<code class="docutils literal"><span class="pre">string</span></code>, <code class="docutils literal"><span class="pre">timeticks</span></code></dd>
<dt>snmp.&lt;kpi name&gt;.description=&lt;text description&gt;</dt>
<dd>Description of KPI to be added in MIB</dd>
<dt>snmp.&lt;kpi name&gt;.postprocess=&lt;formula&gt;</dt>
<dd>Post process formula to apply to KPI before sending over SNMP.
Ex: Convert float to interger by mutiplying by 100: <code class="docutils literal"><span class="pre">$1*100</span></code></dd>
</dl>
</div></blockquote>
<div class="section" id="commands-to-use-to-get-mib-information">
<h3>Commands to use to get MIB information:<a class="headerlink" href="#commands-to-use-to-get-mib-information" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>Snmp Configuration</dt>
<dd>See configuration file example in <code class="docutils literal"><span class="pre">/etc/snmp/snmpd.conf.rpimonitor</span></code>
and activate pass_persist extension</dd>
<dt>Extract MIB from RPi-Monitor</dt>
<dd><code class="docutils literal"><span class="pre">rpimonitord</span> <span class="pre">-m</span> <span class="pre">&gt;</span> <span class="pre">~/mib.txt</span></code></dd>
<dt>Get data from SNMP</dt>
<dd><code class="docutils literal"><span class="pre">snmpwalk</span> <span class="pre">-v</span> <span class="pre">2c</span> <span class="pre">-m</span> <span class="pre">~/mib.txt</span> <span class="pre">-c</span> <span class="pre">public</span> <span class="pre">127.0.0.1</span> <span class="pre">1.3.6.1.4.1.54321.42</span></code></dd>
</dl>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="23_configuration_helper.html" class="btn btn-neutral float-right" title="Interactive Configuration Helper" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="21_daemon.html" class="btn btn-neutral" title="Daemon configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Xavier Berger.
      Last updated on Feb 24, 2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6853682829194266"
     data-ad-slot="2876944524"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>