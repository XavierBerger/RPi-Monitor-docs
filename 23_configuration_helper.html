

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Interactive Configuration Helper &mdash; RPi-Monitor v2.13-r0</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="next" title="Web interface configuration" href="24_web.html" />
    <link rel="prev" title="Metrics extraction configuration" href="22_extraction.html" />


<script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6853682829194266",
    enable_page_level_ads: true
  });
</script>



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114314379-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-114314379-1');
</script>



  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  
 
<img style="position: fixed; top: 0; right: 0; z-index: 100; height:300px; border: 0;" src="_images/wip.png">


  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> RPi-Monitor
          

          
          </a>

          
            
            
              <div class="version">
                2.13
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          

            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="01_features.html">Keys features of RPi-Monitor</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="10_index.html">Getting started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="20_index.html">Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="21_daemon.html">Daemon configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="22_extraction.html">Metrics extraction configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Interactive Configuration Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="24_web.html">Web interface configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="25_addons.html">Addons configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="26_alert.html">Alert configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="27_configuration_templates.html">Configuration templates</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="30_index.html">Usages</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="40_index.html">To go further</a></li>
</ul>

            
          

<hr />
<div style="padding: 0;">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:inline-block;width:300px;height:250px"
         data-ad-client="ca-pub-6853682829194266"
         data-ad-slot="2876944524"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>


        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RPi-Monitor</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="20_index.html">Configuration</a> &raquo;</li>
        
      <li>Interactive Configuration Helper</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <!-- User defined GitHub URL -->
              <a href="https://github.com/XavierBerger/RPi-Monitor/blob/feature/docs/docs/source/26_configuration_helper.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="interactive-configuration-helper">
<h1>Interactive Configuration Helper<a class="headerlink" href="#interactive-configuration-helper" title="Permalink to this headline">Â¶</a></h1>
<p><strong>RPi-Monitor</strong> <cite>Interactive Configuration Helper</cite> is a tool embedded into
<code class="docutils literal"><span class="pre">rpimonitord</span></code> helping to create configuration files.</p>
<p>This example is detailling how to use it to monitor a ntfs volume.</p>
<p>First execute the following command:</p>
<p><code class="docutils literal"><span class="pre">rpimonitord</span> <span class="pre">-i</span></code></p>
<img alt="_images/helper001.png" src="_images/helper001.png" />
<p>Press <code class="docutils literal"><span class="pre">Enter</span></code></p>
<img alt="_images/helper002.png" src="_images/helper002.png" />
<p>Enter : <code class="docutils literal"><span class="pre">df</span> <span class="pre">-t</span> <span class="pre">ntfs</span></code></p>
<img alt="_images/helper003.png" src="_images/helper003.png" />
<p><strong>RPi-Monitor</strong> will tell you how it will process the source.
In our example, it will execute the command <code class="docutils literal"><span class="pre">df</span></code>.
If it is correct, press <code class="docutils literal"><span class="pre">Enter</span></code>, if not, enter <code class="docutils literal"><span class="pre">no</span></code> ( or <code class="docutils literal"><span class="pre">No</span></code> or <code class="docutils literal"><span class="pre">n</span></code> or <code class="docutils literal"><span class="pre">N</span></code> )
to go back to previous screen.</p>
<img alt="_images/helper004.png" src="_images/helper004.png" />
<p>RPi-Monitor show you the ouput of the command as defined as source. If the
output is the one expected press <code class="docutils literal"><span class="pre">Enter</span></code>, if not, <strong>RPi-Monitor</strong> will ask you
to define the source again.</p>
<img alt="_images/helper005.png" src="_images/helper005.png" />
<p>By default the regulare expression is <code class="docutils literal"><span class="pre">(.*)</span></code>. This will return all the
data given by the source.
In the following screen you will see how we will find the regular expression
extracting the available space of our ntfs drive step by step.</p>
<p>Step one, hit <code class="docutils literal"><span class="pre">Enter</span></code> to see what is given by the source by default.</p>
<img alt="_images/helper006.png" src="_images/helper006.png" />
<p>The output is not the one expected hit <code class="docutils literal"><span class="pre">Enter</span></code> to define a new Regular expression.
The data is located after <code class="docutils literal"><span class="pre">sda1</span></code>. Lets enter the following regular
expression: <code class="docutils literal"><span class="pre">sda1(.*)</span></code> to get what is after <code class="docutils literal"><span class="pre">sda1</span></code>.</p>
<img alt="_images/helper007.png" src="_images/helper007.png" />
<p>The output is not the one expected yet hit <code class="docutils literal"><span class="pre">Enter</span></code> to define a new regular expression.
The data is located after <code class="docutils literal"><span class="pre">sda1</span></code> after some spaces <code class="docutils literal"><span class="pre">\s+</span></code>, some numbers <code class="docutils literal"><span class="pre">\d+</span></code>,
some spaces <code class="docutils literal"><span class="pre">\s+</span></code>, some numbers <code class="docutils literal"><span class="pre">\d+</span></code>, some spaces`` s+`` and is composed of numbers <code class="docutils literal"><span class="pre">(\d+)</span></code>.
Enter then the following regulare expression: <code class="docutils literal"><span class="pre">sda1\s+\d+\s+\d+\s+(\d+)</span></code></p>
<img alt="_images/helper008.png" src="_images/helper008.png" />
<p>The result is now the one expected , enter <code class="docutils literal"><span class="pre">Yes</span></code> ( or <code class="docutils literal"><span class="pre">yes</span></code> or <code class="docutils literal"><span class="pre">Y</span></code> or <code class="docutils literal"><span class="pre">y</span></code> )</p>
<img alt="_images/helper009.png" src="_images/helper009.png" />
<p>We want the value in <code class="docutils literal"><span class="pre">MB</span></code> while is it given in <code class="docutils literal"><span class="pre">kB</span></code>. We then need to devide it by <code class="docutils literal"><span class="pre">1024</span></code>.
The formula is then: <code class="docutils literal"><span class="pre">$1/1024</span></code></p>
<img alt="_images/helper010.png" src="_images/helper010.png" />
<p>This is the expected value, enter <code class="docutils literal"><span class="pre">yes</span></code></p>
<img alt="_images/helper011.png" src="_images/helper011.png" />
<p>The value extracted is variable so <code class="docutils literal"><span class="pre">dynamic</span></code> so enter <code class="docutils literal"><span class="pre">No</span></code>.</p>
<img alt="_images/helper012.png" src="_images/helper012.png" />
<p><strong>RPi-Monitor</strong> gives you the template of configuration. You now have to copy it
into an existing configuration file or add a new file in
<code class="docutils literal"><span class="pre">/etc/rpimonitord.conf.d/</span></code> and update the text inside <code class="docutils literal"><span class="pre">&lt;&gt;</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>dynamic.1.name=storage2_available
dynamic.1.source=df -t ntfs
dynamic.1.regexp=sda1\s+\d+\s+\d+\s+(\d+)
dynamic.1.postprocess=$1/1024
dynamic.1.rrd=GAUGE
</pre></div>
</div>
<p>Once the configuration will be apply, restart <strong>RPi-Monitor</strong> with the command:</p>
<p><code class="docutils literal"><span class="pre">/etc/init.d/rpimonitor</span> <span class="pre">restart</span></code></p>
<p>I hope this post is detailled enough to help you to configure <strong>RPi-Monitor</strong> to
define the correct sources and regular expression.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="24_web.html" class="btn btn-neutral float-right" title="Web interface configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="22_extraction.html" class="btn btn-neutral" title="Metrics extraction configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Xavier Berger.
      Last updated on Feb 28, 2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6853682829194266"
     data-ad-slot="2876944524"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>